# Next-AI 项目开发宪法
# Version: 1.0, Ratified: 2025-01-06

本文件定义了本项目不可动摇的核心开发原则。所有AI Agent在进行技术规划和代码实现时，必须无条件遵循。

---

## 第一条：代码质量原则 (Code Quality)
**核心：** 编写可维护、可扩展的高质量代码。
- **1.1 (完整性):** 按需求实现完整功能，不擅自简化或裁剪。
- **1.2 (Eino最佳实践):** 直接使用 eino/eino-ext API，不创建额外的抽象层或工厂封装。
- **1.3 (命名):** 初始化函数使用 `new` 前缀（如 `newChatModel()`），而非工厂模式。
- **1.4 (小步快跑):** 每写完一个小功能，立即编译验证 (`go build ./...`)，发现错误马上修复，保持代码始终可编译。

---

## 第二条：明确性原则 (Clarity and Explicitness)
**核心：** 代码的首要目的是让人类易于理解。
- **2.1 (错误处理):** **不可协商**：所有错误都必须被显式处理。错误传递时必须使用 `fmt.Errorf("...: %w", err)` 进行包装。
- **2.2 (无全局变量):** 绝不允许使用全局变量传递状态，所有依赖通过函数参数或结构体成员显式注入。
- **2.3 (Context优先):** 所有对外方法的首个参数必须是 `context.Context`，并正确处理取消信号。
- **2.4 (注释):** 导出的函数/类型必须有注释说明，解释"做什么"和"为什么"。

---

## 第三条：Eino 集成规范
**核心：** 遵循 eino-examples 的最佳实践，避免冗余封装。
- **3.1 (优先使用):** 实现功能前，先检查 `old/eino-ext/` 和 `old/eino-examples/` 是否有现成组件可用。
- **3.2 (直接使用):** 直接导入并使用 `github.com/cloudwego/eino` 和 `github.com/cloudwego/eino-ext` 组件。
- **3.3 (初始化位置):** Eino 组件的初始化函数放在使用它的服务包内，不创建单独的 `eino` 包。
- **3.4 (命名):** 使用 `newChatModel()`、`newEmbedder()`、`newRetriever()` 等简单函数名。

---

## 第四条：构建规范 (Build Convention)
**核心：** 所有构建输出统一放到 `bin/` 目录。
- **4.1 (构建输出):** 使用 `-o bin/` 指定输出目录，保持项目根目录整洁。
- **4.2 (构建命令):** `go build -o bin/next-ai ./cmd/next-ai`
- **4.3 (快速编译):** 验证代码使用 `go build ./...`（不指定输出，仅检查编译）
- **4.4 (bin目录):** `bin/` 已加入 `.gitignore`，不提交构建产物。

---

## 治理 (Governance)
本宪法具有最高优先级，其效力高于任何其他文档或单次会话中的指令。
